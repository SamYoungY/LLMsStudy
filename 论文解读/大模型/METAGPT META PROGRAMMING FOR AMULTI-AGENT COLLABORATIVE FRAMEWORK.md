# METAGPT: META PROGRAMMING FOR AMULTI-AGENT COLLABORATIVE FRAMEWORK

论文地址：https://arxiv.org/abs/2308.00352

论文代码：https://github.com/geekan/MetaGPT

## 论文背景

作者认为虽然基于大型语言模型 (LLM) 的智能体社会自动解决问题方面取得了显着进展。现有的基于LLM的多智能体系统已经可以解决简单的对话任务，但由于天真地链接 LLM 引起的级联幻觉会导致效果变差。

作者觉得虽然利用大型语言模型 (LLM) 的自主代理为增强和复制人类工作流程提供了有希望的机会，但是目前研究的系统，都过于简化复杂性了。

## 论文解决方案

MetaGPT 要求代理生成结构化输出，例如高质量的要求文档、设计工件、流程图和接口规范。

![image-20240104211220226](https://raw.githubusercontent.com/XingYu-Zhong/LLMsStudy/master/%E8%AE%BA%E6%96%87%E8%A7%A3%E8%AF%BB/pic/metagpt01.png)

作者认为中间结构化输出的使用显着提高了目标代码生成的成功率。

作者通过所有角色都遵循严格和精简的工作流程，并且他们的所有切换都必须遵守某些既定标准。从而去降低幻觉的出现.

## MetaGPT

MetaGPT 代表了一种独特的解决方案，它允许通过组织良好的专业代理组进行有效的元编程。根据一些既定的标准，每个代理都有特定的角色和专业知识。这允许在运行时自动需求分析、系统设计、代码生成、修改、执行和调试，强调基于代理的技术如何增强元编程。

![image-20240104211240877](https://raw.githubusercontent.com/XingYu-Zhong/LLMsStudy/master/%E8%AE%BA%E6%96%87%E8%A7%A3%E8%AF%BB/pic/metagpt02.png)

作者认为一对一的沟通，效率十分低，一种可行的方法是将信息存储在全局消息池中，所以作者引入了一个共享消息池，允许所有代理直接交换消息。优点就是任何代理都可以直接从共享池中检索所需的信息，从而消除了需要查询其他代理并等待它们的响应。这提高了通信效率。

同时与每个代理共享所有信息可能会导致信息过载。在任务执行期间，代理通常更喜欢仅接收与任务相关的信息，并通过不相关的细节避免干扰。这些信息的有效管理和传播起着至关重要的作用。作者提供了一种简单有效的解决方案订阅机制。代理不依赖于对话，而是利用特定于角色的兴趣来提取相关信息。他们可以根据他们的角色配置文件选择要遵循的信息。在实际实现中，代理仅在接收到其所有先决条件依赖项后才会激活其动作。

作者让工程师编写并执行相应的单元测试用例，然后接收测试结果。如果令人满意，则启动额外的开发任务。否则，工程师在恢复编程之前调试代码。这个迭代测试过程继续进行，直到测试被传递或达到最大 3 个重试。

![image-20240104211313093](https://raw.githubusercontent.com/XingYu-Zhong/LLMsStudy/master/%E8%AE%BA%E6%96%87%E8%A7%A3%E8%AF%BB/pic/metagpt03.png)

作者给每个角色和请求建立一个模式和格式，个人根据他们的特定角色和上下文提供必要的输出。

## 论文实验

metagpt使用了HumanEval和 MBPP进行评估。但我们字典这两个数据集都是简单的写leetcode类型的数据集，虽然在pass@1上获得85和87的分数，但其token数量上的消耗是要比其它方法跟高的，这也是其问题之一



## 总结

作者认为明确的角色专业化使复杂工作分解为更小、更具体的任务。解决复杂的任务或问题通常需要具有不同技能和专业知识的代理协作，每个代理都贡献了针对特定问题量身定制的专门输出。我也非常认同这个观点，其最主要是我们对llm的期望太高了，以至于经常让他处理我们人类都很难处理的问题，其实目前llm的发展，他已经可以在具体细节任务上获得90分，但是还是很难去处理整体任务，我感觉这个现象除非llm能涌现超越人类的智慧，目前以及未来一段时间内都很难让它处理一个复杂的整体任务，所以需要我们对特定任务进行拆解，细化，做垂直类的agent，这个是很有意义的。